<ng-container *ayamsHasAnyPermissions="['chains:add','chains:edit','chains:*','*:edit','*:add','*:*']">
    <div id="chain" class="page-layout carded fullwidth inner-scroll">

        <!-- TOP BACKGROUND -->
        <div class="top-bg accent"></div>
        <!-- / TOP BACKGROUND -->

        <!-- CENTER -->
        <div class="center">

            <!-- HEADER -->
            <div class="header accent" fxLayout="row" fxLayoutAlign="space-between center">

                <!-- APP TITLE -->
                <div fxLayout="row" fxLayoutAlign="start center">

                    <button mat-icon-button class="mr-0 mr-sm-16" [routerLink]="'/exploitation/reading'">
                        <mat-icon>arrow_back</mat-icon>
                    </button>


                    <div fxLayout="column" fxLayoutAlign="start start"
                        [@animate]="{value:'*',params:{delay:'100ms',x:'-25px'}}">
                        <div class="h2" *ngIf="pageType ==='edit'">
                            {{'ADD-EDIT.HEADER.title-edit' | translate}}
                        </div>
                        <div class="h2" *ngIf="pageType ==='add'">
                            {{'ADD-EDIT.HEADER.title-add' | translate}} {{code}}
                        </div>
                    </div>
                </div>
                <!-- / APP TITLE -->

                <button mat-raised-button class="save-chain-button mat-white-bg" [disabled]="(selectedUsers.length==0)"
                    *ngIf="pageType ==='add'" (click)="onSave()">
                    <span>{{'ADD-EDIT.BUTTON.add' | translate}}</span>
                </button>
            </div>
            <!-- / HEADER -->

            <!-- CONTENT CARD -->
            <div class="content-card mat-white-bg">

                <!-- CONTENT -->
                <div class="content">
                    <div class="tab-content p-24" fusePerfectScrollbar>
                        <mat-form-field appearance="outline" class="w-100-p">
                            <mat-label>{{'ADD-EDIT.FIELD.user' | translate}}</mat-label>
                            <mat-icon matSuffix class="secondary-text">account_circle</mat-icon>
                            <mat-select (selectionChange)="selectUser($event.value)">
                                <mat-option *ngFor="let user of users" [value]="user">
                                    {{user.lastName}} {{user.firstName}}
                                </mat-option>
                            </mat-select>
                        </mat-form-field>


                        <div class="section pb-48">

                            <div class="pb-16" fxLayout="row" fxLayoutAlign="start center">
                                <mat-icon class="m-0 mr-16 secondary-text">person</mat-icon>
                                <div class="h2 secondary-text">Personnel</div>
                            </div>

                            <table class="simple">
                                <thead>
                                    <tr>
                                        <th>Nom</th>
                                        <th>Prénom</th>
                                        <th>N° Tel</th>
                                        <th></th>
                                    </tr>
                                </thead>
                                <tbody>

                                    <tr *ngFor="let user of selectedUsers;let i = index">
                                        <td>
                                            <span>
                                                {{user.lastName}}
                                            </span>
                                        </td>
                                        <td>
                                            <span>
                                                {{user.firstName}}
                                            </span>
                                        </td>
                                        <td>
                                            <span>
                                                {{user.phoneNumber}}
                                            </span>
                                        </td>
                                        <td>
                                            <span>
                                                <button mat-icon-button class="mr-0 mr-sm-16" (click)="deleteUser(i)">
                                                    <mat-icon>delete</mat-icon>
                                                </button>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-- / CONTENT -->

            </div>
            <!-- / CONTENT CARD -->

        </div>
        <!-- / CENTER -->
    </div>
</ng-container>